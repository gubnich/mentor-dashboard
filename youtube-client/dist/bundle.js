!function(e){var t={};function n(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(r,s,function(t){return e[t]}.bind(null,s));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t);var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.base="https://www.googleapis.com/youtube/v3",this.key="AIzaSyANtg_BKDQBNwrJTxtyrMDVwGKqF4NhcVw",this.next="",this.maxResults=18}var t,n,s;return t=e,(n=[{key:"search",value:function(e){var t=this,n=new XMLHttpRequest;return new Promise(function(r,s){n.open("GET","".concat(t.base,"/search?part=snippet&type=video&key=").concat(t.key,"&q=").concat(e,"&maxResults=").concat(t.maxResults,"&pageToken=").concat(t.next),!0),n.onload=function(){return r(n)},n.send()})}},{key:"getViews",value:function(e){var t=this,n=new XMLHttpRequest;return new Promise(function(r,s){n.open("GET","".concat(t.base,"/videos?part=statistics&key=").concat(t.key,"&id=").concat(e)),n.onload=function(){return r(n)},n.send()})}}])&&r(t.prototype,n),s&&r(t,s),e}();var i=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.self=document.createElement("form"),this.self.classList.add("search-bar"),this.submit=document.createElement("input"),this.submit.value="",this.input=document.createElement("input"),this.submit.setAttribute("type","submit"),this.input.setAttribute("type","text"),this.self.append(this.submit),this.self.append(this.input),this.youtube=new s};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.self=document.createElement("ul"),this.self.classList.add("carousel"),this.pagesAmount=0,this.pageNumber=0,this.clipsTotal=18,this.prevPageNumber=0,this.clipsPerPage=0,this.clipsLeft=0}var t,n,r;return t=e,(n=[{key:"getClipsPerPage",value:function(){return Math.round(this.self.clientWidth/this.self.firstElementChild.offsetWidth)}},{key:"getPagesAmount",value:function(){return Math.floor(this.clipsTotal/this.clipsPerPage)}},{key:"getClipsLeft",value:function(){return this.pageNumber*this.clipsPerPage}},{key:"updateProps",value:function(){this.prevClipsPerPage=this.clipsPerPage,this.prevPageNumber=this.pageNumber,this.clipsPerPage=this.getClipsPerPage(),this.pagesAmount=this.getPagesAmount(),this.pageNumber=Math.floor(this.clipsLeft/this.clipsPerPage)}}])&&a(t.prototype,n),r&&a(t,r),e}();var u=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.self=document.createElement("li"),this.figure=document.createElement("figure"),this.figcaption=document.createElement("figcaption"),this.link=document.createElement("a"),this.preview=document.createElement("img"),this.author=document.createElement("span"),this.description=document.createElement("p"),this.description.innerText=t.snippet.description,this.author.classList.add("author"),this.author.innerText=t.snippet.channelTitle,this.pubdate=document.createElement("span"),this.pubdate.classList.add("pubdate"),this.pubdate.innerText=new Date(t.snippet.publishedAt).toLocaleDateString("en-US"),this.views=document.createElement("span"),this.views.classList.add("views"),this.preview.src=t.snippet.thumbnails.medium.url,this.preview.alt="clip preview",this.link.href="https://www.youtube.com/watch?v=".concat(t.id.videoId),this.link.innerText=t.snippet.title,this.self.append(this.figure),this.figure.append(this.figcaption),this.figcaption.append(this.link),this.figure.append(this.preview),this.figure.append(this.author),this.figure.append(this.pubdate),this.figure.append(this.views),this.figure.append(this.description)};function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.self=document.createElement("ul"),this.self.classList.add("controls"),this.controls=[],this.empty=!0,this.firstControl=0,this.lastControl=0,this.currentControl=0}var t,n,r;return t=e,(n=[{key:"updateControls",value:function(e){var t=document.createDocumentFragment();this.controls=[];for(var n=1;n<=e&&n<6;n++){var r=document.createElement("li"),s=document.createElement("a");r.append(s),s.innerText=n,s.setAttribute("data-index",n-1),t.append(r),this.controls.push(s)}this.controls[this.currentControl].classList.add("current"),this.self.append(t),this.empty=!1,this.firstControl=this.controls[0],this.lastControl=this.controls[this.controls.length-1]}}])&&c(t.prototype,n),r&&c(t,r),e}(),p=document.createElement("div");p.classList.add("wrapper");var f,d=new i,h=new o,m=new l;function g(e){e&&(e.preventDefault(),h.self.innerHTML=""),d.youtube.search(d.input.value).then(function(e){var t=document.createDocumentFragment(),n=JSON.parse(e.response).items;if(d.youtube.next=JSON.parse(e.response).nextPageToken,n.forEach(function(e){var n=new u(e);d.youtube.getViews(e.id.videoId).then(function(e){var t=JSON.parse(e.response).items;n.views.innerText=t[0].statistics.viewCount}),t.append(n.self)}),h.self.append(t),h.updateProps(),m.empty){var r=Math.round(d.youtube.maxResults/h.clipsPerPage);m.updateControls(r)}},function(e){})}p.append(d.self),p.append(h.self),p.append(m.self),document.body.prepend(p),window.onresize=function(){h.updateProps(),f=h.pageNumber-h.prevPageNumber,h.prevClipsPerPage-h.clipsPerPage>0&&(h.self.style.transform="translateX(".concat(-100*h.pageNumber,"%)"),h.self.style.transition="transform 1s",m.controls.forEach(function(e){e.innerText=Number(e.innerText)+f})),h.prevClipsPerPage-h.clipsPerPage<0&&(h.self.style.transform="translateX(".concat(-100*h.pageNumber,"%)"),h.self.style.transition="transform 1s",m.controls.forEach(function(e){return e.innerText=Number(e.innerText)+f}))};var v=0;function b(e){var t=e.pageX||e.changedTouches[0].pageX;return h.self.style.transform="translateX(".concat(h.pageNumber*-h.self.clientWidth+t-v,"px)"),h.self.style.transform}function y(e){v=e.pageX||e.changedTouches[0].pageX,h.self.style.transition=null,h.self.addEventListener("mousemove",b),h.self.addEventListener("touchmove",b)}function P(){h.clipsLeft=h.pageNumber*h.clipsPerPage,h.self.style.transform="translateX(".concat(-100*h.pageNumber,"%)"),h.self.style.transition="transform 1s"}function w(e){h.self.removeEventListener("mousemove",b),h.self.removeEventListener("touchmove",b);var t=e.pageX||e.changedTouches[0].pageX;t<v&&(h.pageNumber<h.pagesAmount-1&&(h.pageNumber++,m.controls[m.currentControl].getAttribute("data-index")<m.controls.length-2?(m.controls[m.currentControl].classList.remove("current"),m.currentControl++,m.controls[m.currentControl].classList.add("current")):m.controls.forEach(function(e){return e.innerText++})),P()),t>v&&h.pageNumber>=0&&(h.pageNumber>0&&(h.pageNumber--,m.controls[m.currentControl].getAttribute("data-index")>1||"2"===m.controls[m.currentControl].innerText?(m.controls[m.currentControl].classList.remove("current"),m.currentControl--,m.controls[m.currentControl].classList.add("current")):m.controls.forEach(function(e){return e.innerText--})),P()),h.pageNumber>=h.pagesAmount/2&&(g(),h.clipsTotal+=d.youtube.maxResults,h.pagesAmount=h.getPagesAmount())}function x(e){m.controls[m.currentControl].classList.remove("current"),m.currentControl=e,m.controls[e].classList.add("current")}m.self.addEventListener("touchstart",function(e){var t=document.createElement("span");e.target.innerText.length<6&&(t.innerText=e.target.innerText),t.classList.add("display"),e.target.append(t)}),m.self.addEventListener("touchend",function(e){e.target.lastChild.remove()}),d.self.addEventListener("submit",g),h.self.addEventListener("mousedown",y),h.self.addEventListener("touchstart",y),h.self.addEventListener("mouseup",w),h.self.addEventListener("touchend",w),m.self.addEventListener("click",function(e){var t=Number(e.target.innerText);t&&(h.pageNumber=t-1,e.target===m.firstControl?(t>1&&(m.controls.forEach(function(e){return e.innerText--}),x(1)),1===t&&x(e.target.getAttribute("data-index")),P()):e.target===m.lastControl?(h.pageNumber>=h.pagesAmount/2&&(g(),h.clipsTotal+=d.youtube.maxResults,h.pagesAmount=h.getPagesAmount()),x(e.target.getAttribute("data-index")-1),P(),m.controls.forEach(function(e){return e.innerText++})):t<m.lastControl.innerText&&(h.pageNumber>=h.pagesAmount/2&&(g(),h.clipsTotal+=d.youtube.maxResults,h.pagesAmount=h.getPagesAmount()),x(e.target.getAttribute("data-index")),P()))})}]);